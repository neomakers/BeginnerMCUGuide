# Lesson 005: 单片机程序执行时间与晶振频率调整

## 1. 课程目标
- 理解不同指令的执行时间。
- 掌握单片机的晶振频率如何影响程序执行时间。
- 学会通过调整晶振频率来观察程序执行时间的变化。

---

## 2. 课程内容

### 2.1 **程序示例**

以下是本节课的程序：

```assembly
ORG 0000H
JMP start      ; 跳转到 start
ORG 0003H
start:
ORG 0100H
init:
    MOV A, #5Ch ; 将 5Ch 装载到累加器 A 中
loop:
    ADD A, #01H ; A = A + 01H
    JMP $       ; 无限循环，跳转到当前位置
    JMP loop    ; 跳转到 loop
END
```

### 2.2 **程序分析**

在 `JMP start` 到 `ORG 0100H` 之间没有任何代码，所以程序会在此过程中移动程序计数器（PC），直到到达 0100H，才能显示出指令。具体情况如下：
- **PC 移动**：在无指令时，PC 指针会持续移动，并占用 **1us** 的时间。
- **JMP $ 指令的执行**：虽然 `JMP $` 是一个无限循环，但它仍然占用 **1us** 的时间。
- **其他指令的执行**：例如 `MOV` 和 `ADD` 等大多数指令占用 **2us** 的时间。

---

## 3. 晶振频率对程序执行时间的影响

通过调整单片机的晶振频率，我们可以观察到程序执行时间的变化：

### 3.1 **降低频率：12MHz 到 6Hz**
- 当我们将单片机的晶振频率从 **12MHz** 降低到 **6Hz** 时，原本 **1us** 的执行时间变为 **2us**。
- 这个效果类似于降低了计算机的时钟频率，使得每条指令的执行时间变长。

### 3.2 **提高频率：12MHz 到 24Hz**
- 当我们将晶振频率从 **12MHz** 提高到 **24Hz** 时，执行时间减半，**1us** 的时间变为 **0.5us**，即 **500ns**。
- 这种效果类似于提高计算机的时钟频率，使得每条指令的执行速度更快。

### 3.3 **频率调整与程序执行时间的关系**
- 调整晶振频率的原理类似于 **计算机超频或降频**，改变了系统的时钟周期，进而影响程序指令的执行速度。
- 学生可以通过实际调整单片机的晶振频率，观察程序运行时间的变化，从而更好地理解时钟频率与执行时间的关系。

---

## 4. 实验与总结

### 4.1 **实验步骤**
- 使用 Proteus 或其他仿真软件，运行上述程序，并观察不同晶振频率下的程序执行时间。
- 通过调整晶振频率，记录 `JMP $` 和其他指令的执行时间变化。

### 4.2 **总结**
- **执行时间的变化**：通过实验，学生可以直观地看到晶振频率的变化如何影响程序的执行时间。
- **频率调整的实际应用**：了解如何通过改变单片机的晶振频率来优化程序的执行速度或节省能量。
- **类似超频原理**：学生可以将这一概念与计算机超频联系起来，理解时钟频率对指令执行的影响。
